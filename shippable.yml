language: python

python:
  - '3.4'

branches:
  only:
    - beta

env:
  global:
    - AWS_S3_LOCAL_PATH='site'
    - AWS_S3_BUCKET='s3://docsbeta.shippable.com'
    - AWS_S3_REGION='us-east-1'
    # AWS_ACCESS_KEY_ID
    # AWS_SECRET_ACCESS_KEY
    - secure: qi3QJHu3O57oNdC9vMQp73AjvUsOUYMZoXKSCacPe5UU9w7eXDgyCSaV8rkaufdUVIX2bX+hC5XNZJG6rO7Rr0gQS3xEpPJGA6eqTpASS3UT1wS6hOj7g/8DTZtfExXI2p+J4rPFNxawtubxjP11wwBsGVkvYXejSBSSCUerjb2gqitZjxQBudCDhZN7DRcG8PpOY8Opg73NckhbieOELYNdlkgPXWQ6RJ57V2uPFiFdWBK/B6GMGbUbTuUse0JBEsswSrwuk6APlBGfcwo+/0OP2hvpK2qWfHkZnPdXtCFLkPrrESzo5nB98SU68FZu38sz9VGf/5049rItSJY4LQ==

install:
  - pip install -r requirements.txt

script:
  - mkdocs build

after_success:
  - aws s3 sync $AWS_S3_LOCAL_PATH $AWS_S3_BUCKET --delete --acl public-read --region $AWS_S3_REGION
